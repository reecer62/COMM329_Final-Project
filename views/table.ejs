<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="/styles/sanitize.css" />
    <link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/styles/style.css" />
    <script src="/bootstrap/dist/js/bootstrap.bundle.js" defer></script>
    <script src="/scripts/logout.js" defer></script>
    <% if (tableId) { %>
    <script src="/socket.io/socket.io.js" defer></script>
    <script src="/scripts/tableChat.js" defer></script>
    <% } %>
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8="
      crossorigin="anonymous"
    ></script>
    <title><%= title %></title>
  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
      <a href="javascript:void(0);" class="navbar-brand">Player's Hut</a>
      <button
        type="button"
        class="navbar-toggler"
        data-toggle="collapse"
        data-target="#navbarCollapse"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div
        class="collapse navbar-collapse justify-content-between"
        id="navbarCollapse"
      >
        <div class="navbar-nav">
          <a href="/table" class="nav-item nav-link">Table</a>
        </div>
        <div class="nav-item dropdown">
          <a
            href="javascript:void(0)"
            class="nav-link dropdown-toggle"
            data-toggle="dropdown"
            >Username: <span class="uname-text"><%= username %></span>
          </a>
          <% if (currentUser) { %>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="javascript:void(0)">Settings</a>
            <a class="dropdown-item" onclick="logout()">Logout</a>
          </div>
          <% } %>
        </div>
      </div>
    </nav>

    <% if (tableId) { %>
    <p>Table ID: <%= tableId %></p>
    <ul id="messages"></ul>
    <form id="message-form" action="/">
      <textarea id="message" name="message" cols="30" rows="10"></textarea>
      <button type="submit">SUBMIT</button>
      <ul id="typing"></ul>
    </form>
    <% } else { %>
      <form action="/table" method="POST">

            <h1>Join Table</h1>
  
            <p>
              <div class="form-group">
                <label for="table_id">
                  <span>Table ID:</span>
                </label>
                <input id="table_id" type="text" name="table_id" class="form-control login" autofocus/>
              </div>
            </p>
  
            <p>
              <div class="form-group">
                <label for="table_password">
                  <span>Table Password:</span>
                </label>
                <input id="table_password" type="password" name="table_password" class="form-control"/>
              </div>
            </p>


            <h1>Create Table</h1>
  
            <p>
              <div class="form-group">
                <label for="create_id">
                  <span>Table ID:</span>
                </label>
                <input id="create_id" type="text" name="create_id" class="form-control"/>
              </div>
            </p>
  
            <p>
              <div class="form-group">
                <label for="create_password">
                  <span>Table Password:</span>
                </label>
                <input id="create_password" type="password" name="create_password" class="form-control"/>
              </div>
            </p>   
  
        <section class="button-wrapper">
          <button type="submit" id="submit-btn" class="btn btn-primary">SUBMIT</button>
        </section>
      </form>
    <% } %>
  </body>
</html>
